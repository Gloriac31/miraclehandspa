---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  src: string | ImageMetadata;
  alt: string;
  width?: number;
  height?: number;
  class?: string;
  priority?: boolean;
  overlay?: boolean;
  overlayOpacity?: number;
}

const {
  src,
  alt,
  width = 1200,
  height = 800,
  class: className = '',
  priority = true,
  overlay = false,
  overlayOpacity = 0.3
} = Astro.props;

---

<div class={`relative ${className}`}>
  <Image
    src={src}
    alt={alt}
    width={width}
    height={height}
    class="w-full h-full object-cover"
    loading="eager"
    quality={90}
    format="webp"
    sizes="100vw"
    fetchpriority="high"
    decoding="async"
  />
  
  {overlay && (
    <div 
      class="absolute inset-0 bg-black"
      style={`opacity: ${overlayOpacity}`}
    ></div>
  )}
  
  <slot />
</div>
